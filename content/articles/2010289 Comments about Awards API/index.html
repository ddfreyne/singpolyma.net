---
title: Comments about Awards API
date: 2010-10-16 14:06:15 Z
tags: ["Tech","api","Achievements"]
wordpress_path: /actionstream/comments-about-awards-api
---
 <p><span class="vcard">@<a class="url nickname" href="http://twitter.com/codenamebowser">codenamebowser</a></span> has written up a minimal <a rev="reply" rel="in-reply-to" href="http://twitter.com/codenamebowser/status/27499100616">Awards API spec</a> similar in nature to what I <a href="/2010/10/generic-achievement-system/">proposed recently</a>.  <span class="vcard">@<a class="url nickname" href="http://twitter.com/wolever">wolever</a></span> has <a rev="reply" rel="in-reply-to" href="http://twitter.com/wolever/status/27504823941">already made some comments</a>.  My comments are below.</p>  <p>OAuth: yes.  Be aware that OAuth (and really any other system) cannot securely identify non-web apps.  This is because auth keys stored in an app in the possesion of a user can be got by that user.  Many people (including myself and the IETF OAuth spec editor, Eran Hammer-Lahav) feel that desktop/mobile apps should not use consumer tokens at all, but should use empty or "anonymous" tokens so the app can say to the user "an application claiming to be..."</p>  <p>User Accounts: whaaa?  I guess you're trying to let sites use the system if their users don't, but you really probably want to be publishing to an actual usr account, not an invented thing.  Make a way for new users to seamlessly get an account.  You could start OAuth from the client and when they come if they have an account, log them in and associate.  Otherwise get some ID from them (email address or web address) and use that to authenticate them (using email verification and/or openid and/or relmeauth).</p>  <p>I agree with @wolever that if you're going to have limits, you should make them early on.  Most things shouldn't need limits, though.</p>  <p>I would make sure all properties are accessed as though they are just keys in the allswed kvp.  That way the whole API is simpler and feels the same as itself.  Some keys are just predefined with meaning and some aren't.</p>  <p>Threshold seems like overkill for v1.  The client probably knows that anyway.</p>  <p>If you want likits for IDs, look up the limits on the HTML ID attribute.</p>  <p>As @wolever says, don't count on one user = one email.</p>  <p>This draft doesn't say how the kvps are going up to the server. form encoded post?  While a bit more complex, I would look into POSTing activity streams ATOM, since that will allow distributedness and resyndication to work very well.</p>  <p>Before I got to publishing this a <a rev="reply" rel="in-reply-to" href="http://twitter.com/codenamebowser/status/27532593617">new version of the API spec</a> came out.  More comments below.</p>  <p>Authentication: what?  I'm reading this, and you have exactly re-invented OAuth.  As always when re-inventing a security technology, you have done it poorly (md5? are you on crack?)  Use OAuth... it's the same basic tech you're suggesting, but is actually good.</p>  <p>Must have for icon is PNG.  I think size restrictions would be bad at an API level, though for your implementation you may want to institude a MB limit to prevent abuse.</p>  <p>140 characters is a nice arbitrary limit for SMS, but saying it makes things fit on one line in web designs is just not fair.</p>  <p>In the KvP, are values 8-bit safe?  Can I use a 255-byte blob?  8-bit safety is *good*.  Make your limits in bytes, not in characters.</p>  <p>users/create_and_retrieve seems like the only one that's really useful (except maybe retrieve).  What's the use case for users/create?  Of course, as above, I think it would be useful to handle user accounts somewhat differently.</p>  <p>Your XML seems like a good candidate for ATOM, as I suggested:</p> <pre><code>
&lt;entry&gt;
	&lt;author&gt;&lt;email&gt;dgrace@doomstick.com&lt;/email&gt;&lt;/author&gt; &lt;!-- this could be activity-actor as well/instead --&gt;
	&lt;id&gt;test&lt;/id&gt;
	&lt;award:points&gt;10&lt;/award:points&gt;
	&lt;title&gt;Test achievement&lt;/title&gt;
	&lt;content&gt;Got this for being a guinnea pig.&lt;/content&gt; &lt;!-- could use summary for this instead --&gt;
	&lt;link rel="logo" type="image/png" href="data:..." /&gt;
	&lt;award:testkey&gt;testvalue&lt;/award:testkey&gt;
&lt;/entry&gt;
</code></pre>
  <p>This format (or something similar) has resyndication benefits, and also means that one could pass awards around easily using Salmon or Ostatus.</p>
